![](blob/main/viewer/src/assets/media/logo.png?raw=true)

# Nyaruko Download Center

- 一个文件下载中心系统。
- 由管理员增删文件和用户，用户登录到系统进行只读浏览和下载。
- 支持各种语言版本的文件分开上传，使不同语言用户看到不同文件。
- 可以生成二维码进行一键登录。
- 适用于：
  - 团队领导发布通知文档供员工下载。
  - 在设备上附加二维码，扫描后提供说明书或驱动程序等下载。
  - 制作资源下载页面。
 
## 文件夹

| 名称    | 端末 | 编程语言   | 框架或核心库  | 介绍　　　　　　　　　　　　　　　　　 |
| ------- | ---- | ---------- | ------------- | -------------------------------------- |
| manager | 前端 | TypeScript | libNyaruko_TS | 管理员文件管理页面，可以管理用户和文件 |
| viewer  | 前端 | TypeScript | VUE 5         | 文件列表查看和下载页面，给最终用户使用 |
| server  | 后端 | Golang     | libNyaruko_Go | 支持上述前端的服务器端　　　　　　　　 |
| sql     | 后端 | MySQL      | MySQL 8       | 初始数据库表　　　　　　　　　　　　　 |

- 在开始之前，请先更新子模块 [libNyaruko_TS](https://github.com/kagurazakayashi/libNyaruko_TS) 和 [libNyaruko_Go](https://github.com/kagurazakayashi/libNyaruko_Go) 。
  - 第一次下载子模块: `git submodule init`
  - 更新子模块: `git submodule update --remote`

## 用户等级

用户组分为：
- 管理员组：
  - 创建和删除普通用户，增删改查文件。
- 普通用户组：
  - 浏览和下载文件。

权限分为：
- 超级管理员（同上）
- 用户（同上）

# 管理员端操作指南

## 1. 创建用户

1. 登录初始管理员账户，登录成功后会显示用户列表。
2. 点按右下角圆形加号按钮，开始创建一个新用户。
3. 输入以下信息：
  - 用户名：仅可以由英文字母组成，整个系统内不能有重复的用户名（只有大小写不同也不行）
  - 昵称：显示名称（选填）
  - 用户组和权限：
    - 如果需要创建管理文件和用户的管理者账户，请选择「管理员组」和「管理员」；
    - 如果需要创建文件下载用的账户，请选择「用户」和「用户」；
  - 是否可用：默认是「启用」。如果选择「停用」，则表示只创建账户，暂时还不给用户使用。
  - 语言：用户所用默认语言（在生成二维码时可以指定二维码所对应的语言），生效于用户文件浏览页面。
  - 密码：指定一个至少 3 - 512 位的密码，如果后续需要创建免登录二维码，则不要大于 32 位。
4. 点「保存」按钮完成对用户的新建，左上角标题「文件库管理」返回用户列表页即可看到新用户。

## 2. 编辑用户

1. 在用户列表页，点按用户名对应右侧的「铅笔」图标，即可进入编辑画面。
2. 编辑相关信息，参见「创建用户」的步骤 3 及后续步骤。
  - 注意：请勿将所有管理员都删除或降级为普通用户。

## 3. 创建二维码

在类似于 将二维码贴在设备上，扫描二维码列出说明书或驱动程序下载 的场合，可以使用以下方式创建一个二维码，用户扫描该二维码之后，可以无需输入用户名密码（它们已经附带到二维码里面），直接列出他们需要的文件列表。

1. 在用户列表页，点按用户名对应右侧的「扫码」图标。
2. 输入该用户的密码。
  - 注意：一旦二维码生成后，如果修改密码，所有之前对应该用户的二维码都将失效。
3. 选择二维码对应的语言，这决定了用户扫码后列出哪些语言的文件，以及网页呈现的语言。
4. 按「确定」按钮，将会显示生成的二维码。可以按「下载二维码图片」，以供打印贴纸使用。

## 4. 浏览用户下的文件

1. 在用户列表页，点按用户名对应左侧的「文件夹」图标。
2. 此时能看到用户信息和该用户下的所有文件：
  - 表格上方为用户信息，包括昵称、用户组、权限、可用性、用户的创建和修改时间等。
  - 表格内为用户可下载的文件信息，每行包括：
    - 左侧按钮为「下载」，可以将文件下载回本地。
    - 文件名：上传的文件名称。
    - 描述：备注信息（暂不提供）。
    - 语言：例如二维码扫描时，扫英文二维码就只显示语言为英语的文件，扫中文二维码就只显示语言为中文的文件。
    - 创建时间：上传成功的日期。
    - 右侧按钮为「删除」，用户将无法再下载这个文件。

## 5. 上传文件

1. 在用户列表页，点按用户名对应左侧的「文件夹」图标。
2. 此时能看到用户信息和该用户下的所有文件。此时点按右下角圆形的「上传」图标。
3. 点按「选择文件」按钮，选择要上传的文件。
  - 文件名称中禁止包含特殊符号，可以包含中文。
  - 文件名禁止重名，建议一个文件有多个版本的情况下，在文件名后面上传前加个版本号。
  - 为了用户下载便捷，请勿上传特别巨大文件。图片和视频上传前建议考虑压缩，对于无法有效压缩的巨大文件建议考虑分卷。
4. 输入上传路径，即该用户主目录下的子文件夹路径，没有则会创建。
5. 选择语言，决定这个文件要给哪个语言用户进行下载。
  - 例如二维码扫描时，扫英文二维码就只显示语言为英语的文件，扫中文二维码就只显示语言为中文的文件。
6. 点按「开始上传」按钮，将显示上传进度，上传完成结果会有提示。

# LICENSE 许可协议
- [木兰宽松许可证， 第2版](http://license.coscl.org.cn/MulanPSL2)
- [Mulan Permissive Software License，Version 2 (Mulan PSL v2)](http://license.coscl.org.cn/MulanPSL2)